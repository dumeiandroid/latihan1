// =======================================================
// Konversi dari file cfit.php
// =======================================================

/**
 * Menentukan nilai IQ CFIT berdasarkan skor total dan usia.
 * @param {number} skorTotal_cfit - Skor total dari tes CFIT.
 * @param {number} usia - Usia peserta tes.
 * @returns {number} Nilai IQ yang sesuai.
 */
function getIQ_cfit(skorTotal_cfit, usia) {
    // Definisi tabel IQ
    const iqTable = {
        49: [183, 183, 183, 183, 183],
        48: [183, 183, 183, 179, 179],
        47: [183, 183, 179, 176, 176],
        46: [183, 179, 176, 173, 173],
        45: [179, 176, 173, 169, 169],
        44: [176, 173, 169, 167, 167],
        43: [175, 171, 168, 165, 165],
        42: [171, 168, 165, 161, 161],
        41: [167, 163, 160, 157, 157],
        40: [165, 161, 159, 155, 155],
        39: [161, 159, 155, 152, 152],
        38: [159, 155, 152, 149, 149],
        37: [155, 152, 149, 146, 146],
        36: [152, 149, 146, 142, 142],
        35: [149, 146, 142, 139, 139],
        34: [146, 142, 139, 136, 136],
        33: [142, 139, 136, 133, 133],
        32: [139, 136, 133, 129, 129],
        31: [136, 133, 129, 126, 126],
        30: [133, 129, 126, 124, 124],
        29: [129, 126, 124, 120, 120],
        28: [126, 124, 120, 118, 118],
        27: [124, 120, 118, 115, 115],
        26: [120, 118, 115, 112, 112],
        25: [118, 115, 112, 110, 110],
        24: [115, 112, 110, 107, 107],
        23: [112, 110, 107, 104, 104],
        22: [110, 107, 104, 101, 101],
        21: [107, 104, 101, 99, 99],
        20: [104, 101, 99, 96, 96],
        19: [101, 99, 96, 94, 94],
        18: [99, 96, 94, 91, 91],
        17: [96, 94, 91, 88, 88],
        16: [91, 88, 85, 83, 81],
        15: [88, 85, 81, 80, 78],
        14: [85, 81, 78, 76, 75],
        13: [81, 78, 75, 73, 72],
        12: [80, 76, 73, 72, 70],
        11: [76, 73, 70, 68, 67],
        10: [73, 70, 67, 65, 63],
        9: [70, 67, 63, 62, 60],
        8: [67, 63, 60, 58, 57],
        7: [63, 60, 57, 56, 55],
        6: [60, 57, 55, 53, 52],
        5: [57, 55, 53, 51, 48],
        4: [55, 54, 52, 50, 47],
        3: [53, 52, 48, 47, 45],
        2: [52, 48, 45, 44, 42],
        1: [48, 45, 44, 41, 40],
        0: [44, 42, 41, 38, 37],
    };

    // Menentukan kolom berdasarkan usia
    let usiaIndex;
    if (usia >= 13.0 && usia <= 13.5) {
        usiaIndex = 0;
    } else if (usia >= 13.6 && usia <= 14.5) {
        usiaIndex = 1;
    } else if (usia >= 14.6 && usia <= 15.5) {
        usiaIndex = 2;
    } else if (usia >= 15.6 && usia <= 16.5) {
        usiaIndex = 3;
    } else {
        usiaIndex = 4; // Untuk usia > 16.5
    }
    
    // Mengambil nilai IQ, jika skor tidak ditemukan, kembalikan nilai default
    let iqResult = iqTable[skorTotal_cfit] ? iqTable[skorTotal_cfit][usiaIndex] : iqTable[0][4];
    
    return iqResult;
}
